<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Repayment Calculator</title>
</head>
<body>
  <h1>Loan Repayment Calculator</h1>
  <form action="/calculate" method="get">
    <table>
      <thead>
        <tr>
          <th>Loan Name</th>
          <th>Loan Amount</th>
          <th>Tenure (years)</th>
          <th>Interest Rate (%)</th>
          <th>Monthly Payment</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="text" name="loanName" id="loanName" placeholder="Loan Name"></td>
          <td><input type="text" name="loanAmount" id="loanAmount" placeholder="10000"></td>
          <td><input type="text" name="tenure" id="tenure" placeholder="10"></td>
          <td><input type="text" name="interestRate" id="interestRate" placeholder="5"></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <div>
      <input type="submit" value="Add">
    </div>
  </form>
  <script>
    var loanName = document.getElementById("loanName").value;
    var loanAmount = document.getElementById("loanAmount").value;
    var tenure = document.getElementById("tenure").value;
    var interestRate = document.getElementById("interestRate").value;
    var monthlyPayment = (loanAmount * interestRate / 100) / (1 - Math.pow(1 + interestRate / 100, -tenure * 12));
    var table = document.getElementById("table");
    var row = table.insertRow(-1);
    row.insertCell(0).textContent = loanName;
    row.insertCell(1).textContent = loanAmount;
    row.insertCell(2).textContent = tenure;
    row.insertCell(3).textContent = interestRate;
    row.insertCell(4).textContent = monthlyPayment;
    var totalMonthlyPayment = 0;
    for (var cell of table.rows[table.rows.length - 1].cells) {
      if (cell.textContent) {
        totalMonthlyPayment += +cell.textContent;
      }
    }
    table.rows[table.rows.length - 1].cells[4].textContent = totalMonthlyPayment;
  </script>
</body>
</html>
